let questions = [
    {
        pytanie: "Jaka jest średnia temperatura ciała człowieka?",
        odpowiedzi: ["A) 37°C", "B) 38°C", "C) 36°C", "D) 39°C"],
        poprawnaOdpowiedz: "A"
    },
    {
        pytanie: "Która witamina jest wytwarzana, gdy skóra jest wystawiona na działanie światła słonecznego?",
        odpowiedzi: ["A) Witamina A", "B) Witamina C", "C) Witamina D", "D) Witamina E"],
        poprawnaOdpowiedz: "C"
    },
    {
        pytanie: "Jaki procent ciała stanowi woda?",
        odpowiedzi: ["A) 50%", "B) 60%", "C) 70%", "D) 80%"],
        poprawnaOdpowiedz: "C"
    },
    {
        pytanie: "Co jest elektrownią komórki?",
        odpowiedzi: ["A) Jądro komórkowe", "B) Mitochondrium", "C) Rybosom", "D) Aparat Golgiego"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Które zmysły są zwykle najbardziej wyostrzone u noworodków?",
        odpowiedzi: ["A) Wzrok i słuch", "B) Węch i smak", "C) Dotyk i wzrok", "D) Słuch i dotyk"],
        poprawnaOdpowiedz: "A"
    },
    {
        pytanie: "Który pierwiastek chemiczny jest głównym składnikiem ciała?",
        odpowiedzi: ["A) Węgiel", "B) Tlen", "C) Azot", "D) Wodór"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Który z narządów człowieka jest największy?",
        odpowiedzi: ["A) Wątroba", "B) Płuca", "C) Skóra", "D) Serce"],
        poprawnaOdpowiedz: "C"
    },
    {
        pytanie: "Ile kości składa się na ludzką czaszkę?",
        odpowiedzi: ["A) 22", "B) 24", "C) 26", "D) 28"],
        poprawnaOdpowiedz: "A"
    },
    {
        pytanie: "Co to jest hemoglobina?",
        odpowiedzi: ["A) Białko w mięśniach", "B) Rodzaj komórek krwi", "C) Cukier we krwi", "D) Hormon tarczycy"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Jak nazywa się jednostka funkcjonalna nerwu?",
        odpowiedzi: ["A) Komórka", "B) Neuron", "C) Światłoczułość", "D) Receptor"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Jaka część mózgu odpowiada za pamięć?",
        odpowiedzi: ["A) Kora mózgowa", "B) Hipokamp", "C) Mózg środkowy", "D) Rdzeń przedłużony"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Który z tych narządów nie jest częścią układu trawiennego?",
        odpowiedzi: ["A) Wątroba", "B) Trzustka", "C) Płuca", "D) Jelito cienkie"],
        poprawnaOdpowiedz: "C"
    },
    {
        pytanie: "Jaki jest składnik podstawowy komórek roślinnych?",
        odpowiedzi: ["A) Celuloza", "B) Skrobia", "C) Lipidy", "D) Białka"],
        poprawnaOdpowiedz: "A"
    },
    {
        pytanie: "Które z następujących warzyw jest bogate w witaminę C?",
        odpowiedzi: ["A) Marchewka", "B) Ziemniak", "C) Brokuły", "D) Seler"],
        poprawnaOdpowiedz: "C"
    },
    {
        pytanie: "Co to jest cholesterol?",
        odpowiedzi: ["A) Rodzaj cukru", "B) Tłuszcz", "C) Białko", "D) Hormon"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Jak nazywa się substancja, która występuje w papierosach i może prowadzić do uzależnienia?",
        odpowiedzi: ["A) Nikotyna", "B) Kofeina", "C) Alkohol", "D) Kokaina"],
        poprawnaOdpowiedz: "A"
    },
    {
        pytanie: "Co to jest stres?",
        odpowiedzi: ["A) Reakcja na zagrożenie", "B) Stan spokoju i relaksu", "C) Ujemna emocja", "D) Zmęczenie fizyczne"],
        poprawnaOdpowiedz: "A"
    },
    {
        pytanie: "Jakie są skutki palenia papierosów na zdrowie?",
        odpowiedzi: ["A) Wzrost energii", "B) Poprawa zdolności płuc", "C) Wzrost ryzyka chorób", "D) Utrata wagi"],
        poprawnaOdpowiedz: "C"
    },
    {
        pytanie: "Co to jest depresja?",
        odpowiedzi: ["A) Złamanie kości", "B) Stan niskiego nastroju", "C) Wysoki poziom energii", "D) Silne pragnienie snu"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Jaki wpływ na zdrowie ma regularne wykonywanie ćwiczeń fizycznych?",
        odpowiedzi: ["A) Zwiększenie ryzyka chorób", "B) Poprawa kondycji", "C) Spadek stresu", "D) Wzrost ryzyka otyłości"],
        poprawnaOdpowiedz: "B"
    },
    {
        pytanie: "Co to jest cukrzyca?",
        odpowiedzi: ["A) Zaburzenie hormonów", "B) Choroba płuc", "C) Niski poziom cukru", "D) Wysoki poziom cukru"],
        poprawnaOdpowiedz: "D"
    },
    {
    pytanie: "Co to jest najmniejsza jednostka życia?",
    odpowiedzi: ["A) Komórka", "B) Molekuła", "C) Organizm", "D) DNA"],
    poprawnaOdpowiedz: "A"
    },
    {
    pytanie: "Gdzie znajduje się serce w ciele człowieka?",
    odpowiedzi: ["A) Po lewej stronie klatki piersiowej", "B) Po prawej stronie klatki piersiowej", "C) W brzuchu", "D) W plecach"],
    poprawnaOdpowiedz: "A"
    },
    {
    pytanie: "Które z tych narządów filtruje krew?",
    odpowiedzi: ["A) Wątroba", "B) Żołądek", "C) Płuca", "D) Nerki"],
    poprawnaOdpowiedz: "D"
    },

    {
    pytanie: "Jaka jest funkcja płuc?",
    odpowiedzi: ["A) Wydzielanie hormonów", "B) Pobieranie tlenu i usuwanie dwutlenku węgla", "C) Trawienie pokarmu", "D) Kontrola ciśnienia krwi"],
    poprawnaOdpowiedz: "B"
    },

    {
    pytanie: "Jak nazywa się największy kość w ludzkim ciele?",
    odpowiedzi: ["A) Kość udowa", "B) Kość ramienna", "C) Kość miedniczna", "D) Kość krzyżowa"],
    poprawnaOdpowiedz: "A"
    },

    {
    pytanie: "Który z tych zmysłów jest związany z węchem?",
    odpowiedzi: ["A) Smak", "B) Wzrok", "C) Słuch", "D) Węch"],
    poprawnaOdpowiedz: "D"
    },

    {
    pytanie: "Jak nazywa się proces, w którym organizm przekształca pokarm w energię?",
    odpowiedzi: ["A) Trawienie", "B) Fotosynteza", "C) Respiracja", "D) Metabolizm"],
    poprawnaOdpowiedz: "D"
    },

    {
    pytanie: "Które z tych składników odżywczych dostarcza najwięcej energii?",
    odpowiedzi: ["A) Białka", "B) Tłuszcze", "C) Węglowodany", "D) Witaminy"],
    poprawnaOdpowiedz: "B"
    },

    {
    pytanie: "Co to jest diabetes?",
    odpowiedzi: ["A) Choroba serca", "B) Choroba płuc", "C) Choroba związana z poziomem cukru we krwi", "D) Choroba nerek"],
    poprawnaOdpowiedz: "C"
    },

    {
    pytanie: "Jaka część układu nerwowego odpowiada za przekazywanie sygnałów do mózgu?",
    odpowiedzi: ["A) Neurony", "B) Móżdżek", "C) Rdzeń kręgowy", "D) Synapsy"],
    poprawnaOdpowiedz: "C"
    },

    {
    pytanie: "Która witamina jest niezbędna dla utrzymania zdrowych kości?",
    odpowiedzi: ["A) Witamina A", "B) Witamina C", "C) Witamina D", "D) Witamina K"],
    poprawnaOdpowiedz: "C"
    },

    {
    pytanie: "Co to jest cholesterol?",
    odpowiedzi: ["A) Hormon", "B) Cukier", "C) Tłuszcz", "D) Białko"],
    poprawnaOdpowiedz: "C"
    },

    {
    pytanie: "Jak nazywa się proces, w którym organizm zwalcza infekcje?",
    odpowiedzi: ["A) Immunizacja", "B) Reakcja alergiczna", "C) Odporność", "D) Stan zapalny"],
    poprawnaOdpowiedz: "C"
    },

    {
    pytanie: "Który z tych narządów odpowiada za produkcję moczu?",
    odpowiedzi: ["A) Wątroba", "B) Płuca", "C) Nerki", "D) Śledziona"],
    poprawnaOdpowiedz: "C"
    },

    {
    pytanie: "Co to jest anemia?",
    odpowiedzi: ["A) Nadmiar żelaza we krwi", "B) Niedobór czerwonych krwinek lub hemoglobiny", "C) Zaburzenia w krzepnięciu krwi", "D) Infekcja bakteryjna"],
    poprawnaOdpowiedz: "B"
    },

    {
    pytanie: "Który z tych organizmów jest odpowiedzialny za przeziębienie?",
    odpowiedzi: ["A) Bakterie", "B) Wirusy", "C) Grzyby", "D) Pasożyty"],
    poprawnaOdpowiedz: "B"
    },

    {
    pytanie: "Jakie jest podstawowe źródło witaminy C?",
    odpowiedzi: ["A) Mięso", "B) Warzywa i owoce", "C) Nabiał", "D) Zboża"],
    poprawnaOdpowiedz: "B"
    },

    {
    pytanie: "Który z tych składników jest niezbędny dla budowy i naprawy tkanek w organizmie?",
    odpowiedzi: ["A) Białko", "B) Tłuszcz", "C) Węglowodany", "D) Błonnik"],
    poprawnaOdpowiedz: "A"
    },
    
]


let currentQuestionIndex = 0;
let quiz = document.getElementById("quiz");
let submit = document.getElementById("submit");
let numberOfLifes = 3;
let numberOfWins = 0;
let goodAnswer = document.getElementById("goodAnswer");
let wrongAnswer = document.getElementById("wrongAnswer");
let healthBar = document.getElementById("healthBar")


zapytaj();
showNumberOfLifes();

function zapytaj() {
    if (currentQuestionIndex < questions.length && numberOfLifes > 0) {
        let currentQuestion = questions[Math.floor(Math.random() * questions.length)];
    
        quiz.innerHTML = "";
    
        let pytanie = document.createElement("div");
        pytanie.innerText = currentQuestion.pytanie;
        pytanie.classList.add("pytanie");
        quiz.appendChild(pytanie);
    
        currentQuestion.odpowiedzi.forEach((answer, index) => {
            let odpowiedzDiv = document.createElement("div");
            odpowiedzDiv.classList.add("odpowiedz");
            odpowiedzDiv.classList.add("odpowiedz" + (index + 1));
            quiz.appendChild(odpowiedzDiv);
    
            let input = document.createElement("input");
            input.type = "radio";
            input.setAttribute("name", "odpowiedz");
            input.id = "odpowiedz" + index;
            odpowiedzDiv.appendChild(input);
    
            let label = document.createElement("label");
            label.setAttribute("for", "odpowiedz" + index);
            label.textContent = answer;
            odpowiedzDiv.appendChild(label);
        });
    
        currentQuestionIndex++;
    } 
    else if (numberOfLifes <= 0 || currentQuestionIndex == questions.length) {
        endQuiz();
    }
    
}
function showNumberOfLifes () 
{

        healthBar.innerHTML = ""; //Usuwanie zawartości 

        let napisIlosciZyc = document.createElement("div");
        napisIlosciZyc.classList.add("napisIloscZyc")
        napisIlosciZyc.innerText = "Ilość żyć: " + numberOfLifes;
        healthBar.appendChild(napisIlosciZyc);

        if(numberOfLifes > 2)
        {
            let life3 = document.createElement("img");
            life3.classList.add("life3");
            life3.classList.add("life");
            life3.src = "../images/heart.png"
            healthBar.appendChild(life3);
        }
        if(numberOfLifes > 1)
        {
            let life2 = document.createElement("img");
            life2.classList.add("life2");   
            life2.classList.add("life");
            life2.src = "../images/heart.png"
            healthBar.appendChild(life2);
        }
        if(numberOfLifes > 0)
        {
            let life1 = document.createElement("img");
            life1.classList.add("life1");
            life1.classList.add("life");
            life1.src = "../images/heart.png"
            healthBar.appendChild(life1);
        }
        else
        {
            endQuiz();
        }

    if (numberOfLifes == 0)
    {
        let koniec = document.createElement("div");
            koniec.classList.add("koniec");
            koniec.innerText = "Koniec gry"

            let iloscWygranych = document.createElement("div")
            iloscWygranych.classList.add("iloscWygranych");
            iloscWygranych.innerText = "Ilość wygranych to: " + numberOfWins;

            let link = document.createElement("a");
            link.href = "../podstrona/quiz.html"

            let playAgain = document.createElement("div")
            playAgain.classList.add("playAgain")

            let reset = document.createElement("img")
            reset.src = "../images/reset.png";
            reset.classList.add("reset")

            quiz.appendChild(koniec);
            koniec.appendChild(iloscWygranych);
            koniec.appendChild(link);
            link.appendChild(playAgain)
            playAgain.appendChild(reset)
        
    }
}

function endQuiz(){
    let koniec = document.createElement("div");
            koniec.classList.add("koniec");
            koniec.innerText = "Koniec gry"

            let iloscWygranych = document.createElement("div")
            iloscWygranych.classList.add("iloscWygranych");
            iloscWygranych.innerText = "Ilość wygranych to: " + numberOfWins;

            let link = document.createElement("a");
            link.href = "../podstrona/quiz.html"

            let playAgain = document.createElement("div")
            playAgain.classList.add("playAgain")

            let reset = document.createElement("img")
            reset.src = "../images/reset.png";
            reset.classList.add("reset")

            quiz.appendChild(koniec);
            koniec.appendChild(iloscWygranych);
            koniec.appendChild(link);
            link.appendChild(playAgain)
            playAgain.appendChild(reset)
}


submit.addEventListener("click", function() {
    sprawdz()
});

document.addEventListener("keypress", function(){
    if (event.key === "Enter")
    {
        sprawdz()
    }
})


function sprawdz () {
        if(numberOfLifes !== 0 && currentQuestionIndex <= questions.length){

        const radioInputs = document.querySelectorAll('input[type="radio"][name="odpowiedz"]');
        let checkedLabelValue = null;

        radioInputs.forEach(function(input) {
            if (input.checked) {
                const label = input.parentElement.querySelector("label");
                checkedLabelValue = label.textContent;
                return;
            }
        });

        if (checkedLabelValue !== null) {
            let currentQuestion = questions[currentQuestionIndex - 1];
            console.log("Correct answer:", currentQuestion.poprawnaOdpowiedz);
            console.log("Selected answer:", checkedLabelValue[0]);
            if (checkedLabelValue[0] === currentQuestion.poprawnaOdpowiedz) {
                numberOfWins++;
                showGoodAnswer();
                showNumberOfLifes();
                if(numberOfLifes == 0){
                    endQuiz();
                }
            } 
            else 
            {
                console.log("Incorrect answer!");
                numberOfLifes--;
                showNumberOfLifes();   
                showBadAnswer();

            }

        
            zapytaj();
        } else {
            console.log("No input is checked.");
        }
    
    }
    else if( numberOfLifes == 0)
    {
        endQuiz();
    }
    
}

function showGoodAnswer() {
    goodAnswer.classList.add("show");

    setTimeout(function() {
        goodAnswer.classList.remove("show");
    }, 1000);
}

function showBadAnswer() {
    wrongAnswer.classList.add("show");

    setTimeout(function() {
        wrongAnswer.classList.remove("show");
    }, 1000);
}

function showWin ()
{
    let youWon = document.createElement("div")
    youWon.classList.add("youWon")
    youWon.innerText = "Wygrałeś!"

    quiz.appendChild(youWon)
}
